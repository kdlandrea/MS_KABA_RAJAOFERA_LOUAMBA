<!DOCTYPE html>
<html>
    <head>
        <title> Mon score Motus</title>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="score.css" />
        <script
              src="https://code.jquery.com/jquery-3.6.1.min.js"
              integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
              crossorigin="anonymous"></script>
    </head>
    <body>
        <table>
            <thead>
                <tr>
                    <th>Info</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <td>Nb Word(s) found</td>
                <td id="score">42</td>
                </tr>
                <tr>
                <td>Average try</td>
                <td id="average">data</td>
                </tr>
            </tbody>
        </table>
        <a href="http://localhost:3000/index.html">
            <button>Go Back Home</button>
        </a> 
    </body>
    <script>
        //localstorage
        //localStorage.setItem("score", "500");
        //localStorage.clear();
        //localStorage.removeItem("score");
        // if (localStorage.length > 0) {
        //     $("#score").html(localStorage.score)
        //     $("#average").html(localStorage.average)
        // } 
        // else {
        //     $("#score").html("0") // change value
        // }

        //session storage 
        // sessionStorage.setItem("score", "600");
        // if (sessionStorage.length > 0) {
        //     $("#score").html(sessionStorage.score)
        // } 
        // else {
        //     $("#score").html("0") // change value
        // }

        //TODO récupère score du tableau et les afficher sur la page
        var nb_id = 0
        $.get('/score',(datas)=> {
            console.log('Recup score in score.html')
            console.log("username : " +datas["username"])
            
            if (datas["data"].length > 0) {
                for(var i=0; i<datas["data"].length;i++){
                    if(datas["data"][i]["username"]==datas["username"]){
                        nb_id=i
                        break;
                    }
                }
                console.log(datas["data"][nb_id])
                $("#score").html(datas["data"][nb_id]["score"])
                $("#average").html(datas["data"][nb_id]["average"])
            }
            else {
                $("#score").html("0") // change value
            }
        })
    </script>
</html>